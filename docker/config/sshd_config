# SSH daemon configuration for Claude Development Environment

# Disable root login
PermitRootLogin no

# Disable password authentication (key-only)
PasswordAuthentication no

# Enable public key authentication
PubkeyAuthentication yes

# Keep connections alive
ClientAliveInterval 60
ClientAliveCountMax 3

# Use port 2222 to avoid conflicts with Fly.io's hallpass service on port 22
Port 2222

# Logging
# SECURITY: Enhanced logging for audit trail (H4 fix)
SyslogFacility AUTH
LogLevel VERBOSE

# Authentication settings
# SECURITY: Hardened authentication limits (H4 fix)
LoginGraceTime 60
StrictModes yes
MaxAuthTries 3
MaxSessions 5

# Subsystem for SFTP
Subsystem sftp /usr/lib/openssh/sftp-server

# Allow only developer user
AllowUsers developer